-- Migration: Fix companies table schema-- Description: Add missing columns expected by CompanyService.jsALTER TABLE companies ADD COLUMN IF NOT EXISTS domain VARCHAR(255),ADD COLUMN IF NOT EXISTS industry VARCHAR(100),ADD COLUMN IF NOT EXISTS size VARCHAR(50),ADD COLUMN IF NOT EXISTS description TEXT,ADD COLUMN IF NOT EXISTS website VARCHAR(255),ADD COLUMN IF NOT EXISTS logo_url TEXT,ADD COLUMN IF NOT EXISTS owner_id VARCHAR(255),ADD COLUMN IF NOT EXISTS is_active BOOLEAN DEFAULT true,ADD COLUMN IF NOT EXISTS settings JSONB DEFAULT '{}',ADD COLUMN IF NOT EXISTS subscription_plan VARCHAR(50) DEFAULT 'free',ADD COLUMN IF NOT EXISTS max_users INTEGER DEFAULT 5;-- Update existing records to have is_active = true if it was just added as nullUPDATE companies SET is_active = true WHERE is_active IS NULL;UPDATE companies SET settings = '{}' WHERE settings IS NULL;UPDATE companies SET subscription_plan = 'free' WHERE subscription_plan IS NULL;UPDATE companies SET max_users = 5 WHERE max_users IS NULL;
